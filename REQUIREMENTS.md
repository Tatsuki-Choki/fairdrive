# FAIR DRIVE - 要件定義書

## 1. プロジェクト概要

### 1.1 プロジェクト名
FAIR DRIVE（フェアドライブ）

### 1.2 目的・背景
車での旅行やドライブにおいて、ETC料金、ガソリン代、駐車場代などの車関連費用を含む全ての旅行費用を自動的に記録し、公平に割り勘計算を行うWebアプリケーションを開発する。

### 1.3 ターゲットユーザー
- 車で旅行・ドライブを楽しむグループ（友人、家族、カップル）
- 定期的に車でお出かけするコミュニティ
- 車を所有している人とそうでない人が混在するグループ
- 20代〜40代の国内旅行・ドライブ愛好者

### 1.4 基本コンセプト
「車での移動にかかる全ての費用を自動で記録し、公平に分担する」

## 2. 機能要求

### 2.1 基本機能（Walicaベース）

#### 2.1.1 グループ管理
- **グループ作成**: 旅行・ドライブのグループを作成
- **メンバー管理**: 参加者の追加・削除
- **URL共有**: グループページのURL共有機能
- **会員登録不要**: ゲストアクセス対応

#### 2.1.2 手動支払い記録
- **一般支払い記録**: 食事、宿泊、観光地入場料など
- **支払い詳細**: 支払者、金額、内容、参加者選択
- **レシート写真**: 支払いの証拠として写真添付

#### 2.1.3 割り勘計算
- **自動計算**: 最適な清算方法の自動計算
- **リアルタイム更新**: 支払い追加時の即座な再計算
- **清算明細**: 誰が誰にいくら支払うかの明細表示

### 2.2 車関連特化機能（新規開発）

#### 2.2.1 ETC料金自動取得
- **ETCカード連携**: ETCカード利用履歴の自動取得（デモ版は仮データで実装）
- **区間別料金**: 高速道路の区間別料金表示
- **時間帯割引**: 深夜割引、休日割引の自動適用
- **複数カード対応**: グループ内の複数ETCカード統合

#### 2.2.2 ガソリン代計算
- **燃費入力**: 車両ごとの燃費設定
- **走行距離**: 出発地から目的地までの距離計算
- **ガソリン価格**: 全国平均価格の自動取得
- **車両別計算**: 複数車両利用時の個別計算

#### 2.2.3 駐車場代記録
- **位置情報連携**: 現在地周辺の駐車場検索
- **料金自動計算**: 利用時間に基づく料金計算
- **領収書スキャン**: OCR機能による自動入力

### 2.3 その他の機能

#### 2.3.1 支払い方法
- **現金精算**: 現金での清算記録
- **QRコード決済**: PayPay、LINE Payなど
- **銀行振込**: 振込先情報の自動生成

#### 2.3.2 レポート機能
- **旅行サマリー**: 総費用、一人当たり費用
- **カテゴリ別集計**: 交通費、食費、宿泊費など
- **支払い履歴**: 時系列での支払い一覧

## 3. 非機能要求

### 3.1 性能要求
- レスポンス時間: 3秒以内
- 同時接続数: 100グループ
- データ保存期間: 1年間

### 3.2 セキュリティ要求
- HTTPS通信
- URLによるアクセス制御
- 個人情報の暗号化

### 3.3 ユーザビリティ要求
- スマートフォン最適化
- 直感的な操作性
- オフライン対応（一部機能）

## 4. 画面構成

### 4.1 主要画面
1. **フロントページ** ✅ 実装済み
   - グループ作成
   - メンバー追加
   - 燃費・ガソリン価格設定

2. **ダッシュボード**
   - グループ情報表示
   - 現在の清算状況
   - クイックアクション

3. **支払い記録画面**
   - 手動支払い入力
   - ETC履歴表示
   - カテゴリ選択

4. **清算画面**
   - 清算金額表示
   - 支払い方法選択
   - 清算完了処理

5. **履歴画面**
   - 支払い履歴一覧
   - フィルター機能
   - 詳細表示

6. **設定画面**
   - グループ設定
   - メンバー管理
   - 通知設定

## 5. データ構造

### 5.1 主要エンティティ
- **Group**: グループ情報
- **Member**: メンバー情報
- **Payment**: 支払い記録
- **Settlement**: 清算情報
- **Vehicle**: 車両情報

## 6. 技術仕様

### 6.1 フロントエンド
- React + TypeScript
- Tailwind CSS
- Framer Motion
- PWA対応

### 6.2 バックエンド（将来実装）
- Node.js / Express
- PostgreSQL
- Redis（キャッシュ）

### 6.3 外部サービス連携
- ETC利用照会サービス（仮実装）
- ガソリン価格API
- 地図・経路API

## 7. 開発フェーズ

### Phase 1: MVP開発（現在）
- フロントページ ✅
- ダッシュボード
- 基本的な支払い記録
- 簡易清算機能

### Phase 2: 車関連機能
- ETC履歴取得（デモ）
- ガソリン代自動計算
- 駐車場代記録

### Phase 3: 高度な機能
- QRコード決済連携
- レポート機能
- 通知機能

## 8. 制約事項
- スマートフォン専用（タブレット・PC非対応）
- 日本国内のみ対応
- 日本語のみ対応

## 9. 今後の拡張可能性
- 海外旅行対応
- 法人利用向け機能
- AI による支払い自動カテゴライズ
- 旅行プラン提案機能