# グループ共有機能 要求定義

## 概要
グループ作成後、メンバーに共有リンクを送付し、同じグループページにアクセスできるようにする機能。

## 機能要求

### 1. グループ作成完了ポップアップ
- **表示タイミング**: 「グループを作成」ボタン押下後
- **表示内容**:
  - グループ作成完了メッセージ
  - 共有リンク（自動生成）
  - 共有方法の選択肢

### 2. 共有リンク生成
- **形式**: `https://fairdrive.app/group/{グループID}`
- **特徴**:
  - ユニークなグループID（例: `abc123xyz`）
  - 短縮URL形式
  - 有効期限なし（グループが存在する限り有効）

### 3. 共有方法
- **コピーボタン**: リンクをクリップボードにコピー
- **QRコード表示**: スマートフォンでの読み取り用
- **共有ボタン**: 
  - LINE
  - メール
  - その他（Web Share API使用）

### 4. アクセス制御
- **認証不要**: リンクを知っている人は誰でもアクセス可能
- **メンバー登録**: 初回アクセス時に名前を入力してメンバーとして参加
- **権限**:
  - 全メンバー: 閲覧、支払い記録追加
  - グループ作成者: メンバー削除、グループ設定変更

## UI/UXデザイン

### ポップアップデザイン
```
┌─────────────────────────────┐
│   グループを作成しました！   │
│                             │
│  [グループ名]               │
│                             │
│  共有リンク:                │
│  ┌─────────────────────┐   │
│  │ fairdrive.app/g/abc │   │
│  └─────────────────────┘   │
│                             │
│  [コピー] [QRコード] [共有] │
│                             │
│  [ダッシュボードへ]         │
└─────────────────────────────┘
```

### QRコード表示
- ポップアップ内で展開表示
- 白黒のシンプルなデザイン
- URLエンコード済み

## 技術仕様

### フロントエンド
1. **ポップアップコンポーネント**
   - モーダル形式
   - Glassmorphismデザイン
   - Framer Motionでアニメーション

2. **共有機能**
   - Clipboard API（コピー機能）
   - qrcode.js（QRコード生成）
   - Web Share API（共有機能）

3. **ルーティング**
   - `/group/:groupId` パスの追加
   - グループID検証とリダイレクト

### バックエンド（将来実装）
1. **グループ管理API**
   - POST `/api/groups` - グループ作成
   - GET `/api/groups/:id` - グループ情報取得
   - PUT `/api/groups/:id/members` - メンバー追加

2. **データ構造**
```typescript
interface Group {
  id: string;           // ユニークID
  name: string;         // グループ名
  createdBy: string;    // 作成者
  createdAt: Date;      // 作成日時
  members: Member[];    // メンバーリスト
  shareLink: string;    // 共有リンク
  settings: GroupSettings;
}

interface Member {
  id: string;
  name: string;
  joinedAt: Date;
  role: 'owner' | 'member';
}
```

## セキュリティ考慮事項
1. **URLの予測困難性**: ランダムな英数字でID生成
2. **アクセスログ**: 誰がいつアクセスしたか記録
3. **不正アクセス対策**: 連続アクセス制限

## 実装フェーズ

### Phase 1（MVP）
- ローカルストレージでのグループID管理
- 基本的な共有リンク生成とコピー機能
- シンプルなポップアップUI

### Phase 2
- QRコード生成機能
- Web Share API統合
- アニメーション強化

### Phase 3
- バックエンドAPI連携
- リアルタイムデータ同期
- アクセス制御強化